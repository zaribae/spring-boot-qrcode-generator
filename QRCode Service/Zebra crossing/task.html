<div class="step-text">
<p></p><h5 id="description">Description</h5><p>Now that you've completed all the necessary preparations, let's start generating QR codes. QR codes, or Quick Response codes, are square-shaped patterns of black squares on a white background. The specific arrangement of these squares encodes information, which could be in the form of text, a URL, geolocation, or other data types.</p><p>Don't worry; you won't be implementing the data encoding algorithm from scratch. Use the <a href="https://github.com/zxing/zxing" rel="noopener noreferrer nofollow" target="_blank">ZXing open-source library</a> for this purpose.</p><p>First, add these dependencies to the <code class="language-java">build.gradle</code> file:</p><pre><code class="language-java">dependencies {
    // Spring Boot starters
    // ...

    implementation 'com.google.zxing:core:3.5.2'
    implementation 'com.google.zxing:javase:3.5.2'
}</code></pre><p>To generate a <code class="language-java">BufferedImage</code> from a <code class="language-java">String</code> representing some data, you can use the following code:</p><pre><code class="language-java">import com.google.zxing.BarcodeFormat;
import com.google.zxing.WriterException;
import com.google.zxing.client.j2se.MatrixToImageWriter;
import com.google.zxing.common.BitMatrix;
import com.google.zxing.qrcode.QRCodeWriter;

class SomeClass {
    QRCodeWriter writer = new QRCodeWriter();
    try {
        BitMatrix bitMatrix = writer.encode(data, BarcodeFormat.QR_CODE, width, height);
        BufferedImage bufferedImage = MatrixToImageWriter.toBufferedImage(bitMatrix);
    } catch (WriterException e) {
        // handle the WriterException
    }
}</code></pre><p>Initialize a QRCodeWriter object, a part of the ZXing library, to generate a QR code from the provided data. Then, encode the data into a bit matrix by invoking the <code class="language-java">encode</code> method of the <code class="language-java">QRCodeWriter</code> object. This method takes three parameters: the data you want to encode in the QR code (in the <code class="language-java">String</code> format), the specific format of the barcode (in this case, <code class="language-java">BarcodeFormat.QR_CODE</code> for QR codes), and the desired width and height of the resulting image. The <code class="language-java">encode</code> method transforms the input data into a <code class="language-java">BitMatrix</code> object, essentially a 2D array representing the QR code in binary format (black and white squares). Finally, convert the bit matrix to a BufferedImage by using the <code class="language-java">toBufferedImage</code> method of the <code class="language-java">MatrixToImageWriter</code> class.</p><p>You'll need to update the <code class="language-java">GET /api/qrcode</code> endpoint to accept <code class="language-java">contents</code> as another request parameter. This is a mandatory parameter because you need something to encode, and it cannot be empty or blank. If a client submits valid <code class="language-java">contents</code>, <code class="language-java">size</code>, and <code class="language-java">type</code> request parameters, the QR code service should return the status code <code class="language-java">200 OK</code> and a QR code of the specified size, with the encoded contents in the specified format. If the <code class="language-java">contents</code> is not valid, the service should respond with the status code <code class="language-java">400 BAD REQUEST</code> and a JSON with the <code class="language-java">error</code> field and an appropriate error message.</p><p>All previous requirements for request parameter handling remain in effect. If any of the parameters is invalid, the service should respond with the status code <code class="language-java">400 BAD REQUEST</code> and the appropriate error message. If multiple parameters are not valid, the error messages should follow this priority order:</p><p>invalid contents &gt; invalid size &gt; invalid type</p><h5 id="objectives">Objectives</h5><ul><li><p>Modify the <code class="language-java">GET /api/qrcode</code> endpoint to accept <code class="language-java">contents</code> as a new request parameter, in addition to the others.</p></li><li><p>If the <code class="language-java">contents</code> is a non-empty and non-blank string, generate a QR code from the <code class="language-java">contents</code> string and encode it into an image of the size specified by the <code class="language-java">size</code> parameter and in the format specified by the <code class="language-java">type</code> parameter. Return the status code <code class="language-java">200 OK</code> and the generated QR code image in the response body. Don't forget to set the correct <code class="language-java">Content-Type</code> header in the response.</p></li><li><p>If the <code class="language-java">contents</code> is empty or blank, the endpoint should return the status code <code class="language-java">400 BAD REQUEST</code> and a request body in the JSON format with the following contents:</p><pre><code class="language-json">{
    "error": "Contents cannot be null or blank"
}</code></pre></li><li><p>The error for invalid <code class="language-java">contents</code> should have the highest priority. The requirements for handling the other request parameters remain unchanged.</p></li></ul><h5 id="examples">Examples</h5><p><strong>Example 1</strong>. <em>a GET request to /api/qrcode with the correct contents, size and type parameters</em>:</p><p><em>Request</em>: <code class="language-java">GET /api/qrcode?contents=abcdef&amp;size=250&amp;type=png</code></p><p><em>Response code</em>: <code class="language-java">200 OK</code></p><p><em>Response header</em>: <code class="language-java">Content-Type: image/png</code></p><p><em>Response body:</em> byte array</p><p><strong>Example 2</strong>. <em>a GET request to /api/qrcode with an incorrect contents parameter</em>:</p><p><em>Request</em>: <code class="language-java">GET /api/qrcode?contents=&amp;size=200&amp;type=png</code></p><p><em>Response code</em>: <code class="language-java">400 BAD REQUEST</code></p><p><em>Response body</em>:</p><pre><code class="language-json">{
    "error": "Contents cannot be null or blank"
}</code></pre><p><strong>Example 3</strong>. <em>a GET request to /api/qrcode with incorrect contents, and type parameter</em>:</p><p><em>Request</em>: <code class="language-java">GET /api/qrcode?contents=&amp;size=250&amp;type=tiff</code></p><p><em>Response code</em>: <code class="language-java">400 BAD REQUEST</code></p><p><em>Response body</em>:</p><pre><code class="language-json">{
    "error": "Contents cannot be null or blank"
}</code></pre>
</div>